document.addEventListener('DOMContentLoaded',function(){const t=document.querySelector('.contact-form');t&&t.addEventListener('submit',function(e){e.preventDefault(),validateForm()&&t.submit()})});function validateForm(){let e=!0;const t=document.getElementById('name'),n=document.getElementById('email'),a=document.getElementById('message');return clearErrors(),""===t.value.trim()?(showError(t,'O campo Nome é obrigatório.'),e=!1):null,""===n.value.trim()?(showError(n,'O campo E-mail é obrigatório.'),e=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.trim())||(showError(n,'Por favor, insira um endereço de e-mail válido.'),e=!1),""===a.value.trim()?(showError(a,'O campo Mensagem é obrigatório.'),e=!1):null,e}function showError(e,t){e.classList.add('invalid');const n=e.parentElement,a=document.createElement('span');a.className='error-message',a.innerText=t,n.appendChild(a)}function clearErrors(){document.querySelectorAll('.error-message').forEach(e=>e.remove()),document.querySelectorAll('.invalid').forEach(e=>e.classList.remove('invalid'))}function isElementInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function isElementPartiallyInViewport(e){const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth;return(t.top<=.8*n&&t.bottom>=.2*n)&&(t.left<=a&&t.right>=0)}function animateOnScroll(){document.querySelectorAll('.animate-on-scroll').forEach(e=>{isElementPartiallyInViewport(e)&&e.classList.add('visible')})}document.addEventListener('DOMContentLoaded',function(){animateOnScroll(),window.addEventListener('scroll',animateOnScroll),window.addEventListener('resize',animateOnScroll),initLazyLoading()});function initLazyLoading(){if('IntersectionObserver'in window){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(loadImage(e.target),t.unobserve(e.target))})},{rootMargin:'100px'});document.querySelectorAll('img[data-src]').forEach(t=>{e.observe(t)})}else lazyLoadFallback()}function loadImage(e){const t=new Image;t.onload=function(){e.src=e.dataset.src,e.classList.add('loaded'),e.removeAttribute('data-src')},t.onerror=function(){e.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2VtPC90ZXh0Pjwvc3ZnPg==',e.classList.add('error')},t.src=e.dataset.src}function lazyLoadFallback(){const e=document.querySelectorAll('img[data-src]');function t(){e.forEach(e=>{isElementPartiallyInViewport(e)&&loadImage(e)})}window.addEventListener('scroll',t),window.addEventListener('resize',t),t()}let chatType='';function toggleChat(){const e=document.getElementById('chatPopup');e.classList.toggle('open'),e.classList.contains('open')&&backToOptions()}function showContactForm(e){chatType=e,document.getElementById('chatOptions').style.display='none',document.getElementById('chatForm').classList.add('active');const t=document.getElementById('chatMessage');switch(e){case'orcamento':t.placeholder='Descreva seu projeto (tipo, quantidade de pontos, área)...';break;case'duvida':t.placeholder='Qual sua dúvida técnica?';break;case'suporte':t.placeholder='Descreva o problema que está enfrentando...'}
}function backToOptions(){document.getElementById('chatOptions').style.display='flex',document.getElementById('chatForm').classList.remove('active'),document.getElementById('chatSuccess').classList.remove('show'),document.getElementById('chatForm').reset()}function redirectToWhatsApp(){window.open('https://wa.me/5511956534963?text=Olá! Vim do site da RC Suporte e gostaria de conversar.','_blank'),toggleChat()}function redirectToCalculator(){window.location.href='calculadora.html'}document.getElementById('chatForm').addEventListener('submit',function(e){e.preventDefault(),console.log('Chat form submitted:',{type:chatType,name:document.getElementById('chatName').value,email:document.getElementById('chatEmail').value,phone:document.getElementById('chatPhone').value,message:document.getElementById('chatMessage').value}),document.getElementById('chatForm').classList.remove('active'),document.getElementById('chatSuccess').classList.add('show'),"undefined"!=typeof gtag&&gtag('event','chat_submission',{event_category:'engagement',event_label:chatType}),setTimeout(()=>{toggleChat()},3e3)});setTimeout(()=>{localStorage.getItem('chatShown')||(document.getElementById('chatPopup').classList.contains('open')||(toggleChat(),localStorage.setItem('chatShown','true')))},3e4);let popupState={exitIntentShown:!1,newsletterShown:!1,sessionStartTime:Date.now()};function loadPopupState(){const e=localStorage.getItem('rcsuporte_popup_state');if(e){const t=JSON.parse(e);Date.now()-t.lastVisit>6048e5?popupState={exitIntentShown:!1,newsletterShown:!1,sessionStartTime:Date.now()}:popupState={...popupState,...t}}}function savePopupState(){localStorage.setItem('rcsuporte_popup_state',JSON.stringify({...popupState,lastVisit:Date.now()}))}function handleExitIntent(e){e.clientY<=0&&!popupState.exitIntentShown&&(showExitPopup(),popupState.exitIntentShown=!0,savePopupState())}function showExitPopup(){const e=document.getElementById('exitPopup');e&&(e.style.display='flex',setTimeout(()=>e.classList.add('show'),50),"undefined"!=typeof gtag&&gtag('event','popup_shown',{event_category:'engagement',event_label:'exit_intent'}))}function showNewsletterPopup(){const e=document.getElementById('newsletterPopup');e&&!popupState.newsletterShown&&(e.style.display='flex',setTimeout(()=>e.classList.add('show'),50),popupState.newsletterShown=!0,savePopupState(),"undefined"!=typeof gtag&&gtag('event','popup_shown',{event_category:'engagement',event_label:'newsletter'}))}function closePopup(e){const t=document.getElementById(e);t&&(t.classList.remove('show'),setTimeout(()=>t.style.display='none',300),"undefined"!=typeof gtag&&gtag('event','popup_closed',{event_category:'engagement',event_label:e.replace('Popup','')}))}function handleExitForm(e){e.preventDefault();const t=e.target,n=new FormData(t);fetch(t.action,{method:t.method,body:n,headers:{Accept:'application/json'}}).then(e=>{e.ok?(document.getElementById('exitForm').style.display='none',document.getElementById('exitSuccess').style.display='block',"undefined"!=typeof gtag&&gtag('event','lead_generated',{event_category:'conversion',event_label:'exit_popup',value:1}),setTimeout(()=>{closePopup('exitPopup')},5e3)):e.json().then(e=>{Object.hasOwn(e,'errors')?alert(e.errors.map(e=>e.message).join(", ")):alert('Ocorreu um erro ao enviar o formulário. Tente novamente.')})}).catch(e=>{alert('Ocorreu um erro ao enviar o formulário. Tente novamente.')})}function handleNewsletterForm(e){e.preventDefault();const t=e.target,n=new FormData(t),a=Object.fromEntries(n);console.log('Newsletter form submitted:',a),document.getElementById('newsletterForm').style.display='none',document.getElementById('newsletterSuccess').style.display='block',"undefined"!=typeof gtag&&gtag('event','newsletter_signup',{event_category:'conversion',event_label:'newsletter_popup',value:1}),setTimeout(()=>{closePopup('newsletterPopup')},3e3)}function initPopupSystem(){loadPopupState(),document.addEventListener('mouseleave',handleExitIntent),setTimeout(()=>{!popupState.newsletterShown&&!popupState.exitIntentShown&&showNewsletterPopup()},45e3);let e=!1;window.addEventListener('scroll',()=>{e||popupState.newsletterShown||(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight))*100>70&&(e=!0,setTimeout(()=>{!popupState.newsletterShown&&!popupState.exitIntentShown&&showNewsletterPopup()},2e3))}),document.addEventListener('click',e=>{e.target.classList.contains('popup-overlay')&&closePopup(e.target.id)});const t=document.getElementById('exitForm'),n=document.getElementById('newsletterForm');t&&t.addEventListener('submit',handleExitForm),n&&n.addEventListener('submit',handleNewsletterForm)}document.addEventListener('DOMContentLoaded',initPopupSystem);var slideIndex=0;showSlides();function showSlides(){console.log("showSlides function called.");var e,t=document.getElementsByClassName("carousel-item");console.log("Found carousel items:",t.length);for(e=0;e<t.length;e++)t[e].style.display="none";slideIndex++,console.log("Current slideIndex:",slideIndex),slideIndex>t.length&&(slideIndex=1,console.log("Resetting slideIndex to 1.")),t[slideIndex-1].style.display="block",console.log("Displaying slide:",slideIndex),setTimeout(showSlides,8e3)}